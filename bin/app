#! /usr/bin/env node --harmony

var co = require('co');
var appFactory = require('../lib/app');
var program = require('commander');

program.usage('./bin/server [options] <profile>');
program.parse(process.argv);

co(function* () {
	var config = {
		port: 80
	};
	var app = yield appFactory();
	var server = yield app.listen.bind(app, config.port);
	console.log('server listen', { port: config.port });
})(function(err) {
	if (err) throw err;
});